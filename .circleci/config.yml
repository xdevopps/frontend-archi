# workflows:
#   version: 2
#   "build webcomponeents":
#     jobs:
#       - build
# jobs:
#   build:
#     working_directory: ~/project
#     docker:
#       - image: circleci/node:latest
#     steps:
#       - checkout
#       - run:
#           name: install-yarn          
#           command: yarn install

#       - run: 
#           name: build_webcomponent
#           command: yarn build
version: 2.1
orbs:
  node: circleci/node@4.5
jobs:
  release:
    executor: node/default
    steps:
      - checkout
      - node/install
      - node/install-packages # Install and automatically cache packages
      # Run optional required steps before releasing
      # - run: npm run build-script
      - run: npx semantic-release

workflows:
  test_and_release:
    # Run the test jobs first, then the release only when all the test jobs are successful
    jobs:
      - node/test:
          matrix:
            parameters:
              version:
                - 16.1.0
                - 14.17.0
      - release:
          requires:
            - node/test